<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>旅行プラン詳細</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            background-image: url('/image/header.jpg');
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f7f9fc;
            color: #5F7D8A;
            line-height: 1.6;
        }
        .header {
            background-color: #ffffff;
            border-bottom: 1px solid #e9ecef;
            padding: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .header img {
            height: 40px;
            margin-right: 20px;
        }
        .header h1 {
            font-size: 1.8rem;
            color: #495057;
            font-weight: 300;
            margin: 0 10px 0 0;
            flex-grow: 1;
        }
        .button-container {
            display: flex;
            gap: 10px;
            margin-right: 20px;
        }
        .button-container button {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #5B9A9E;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s;
        }
        .button-container button:hover {
            background-color: #6BA7B6;
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .button-container button:active {
            background-color: #4D8C8F;
            transform: translateY(0);
        }
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        .title-wrapper {
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        .title-wrapper h1 {
            font-size: 2rem;
            color: #5F7D8A;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
            margin: 0;
        }
        .destination-badge {
            background-color: #86C7D6;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 14px;
            margin-left: 10px;
        }
        .date-range {
            font-size: 14px;
            color: #5F7D8A;
            font-weight: bold;
            margin-left: 10px;
        }
		.table-wrapper {
		    margin-top: 20px;
		    position: relative;
		  }
		  table {
		    border-collapse: separate;
		    border-spacing: 0;
		    width: 100%;
		  }
		  th, td {
		    border: none;
		    padding: 12px;
		    text-align: left;
		    position: relative;
		  }
		  tr.date-row td {
		    border-top: 1px solid #ddd;
		    border-bottom: 1px solid #ddd;
		    background-color: #f0f0f0;
		    font-weight: bold;
		  }
		  
        .back-button {
            display: inline-block;
            background-color: #86C7D6;
            color: white;
            padding: 10px 20px;
            font-size: 16px;
            font-weight: bold;
            text-align: center;
            border-radius: 25px;
            transition: background-color 0.3s, transform 0.3s;
            text-decoration: none;
        }
        .back-button:hover {
            background-color: #74B5C0;
            transform: translateY(-2px);
        }
        .back-button:active {
            transform: translateY(0);
        }
        .footer {
            background-color: rgb(192, 192, 192);
            color: white;
            padding: 1rem;
            text-align: center;
            font-size: 0.9rem;
        }
        .footer a {
            color: #86C7D6;
            text-decoration: none;
            margin-left: 10px;
        }
        .footer a:hover {
            text-decoration: underline;
        }
        .event-link {
            color: inherit;
			
            text-decoration: none;
        }
        
        .event-link:hover {
            text-decoration: underline;
        }
        .highlight-button {
            background-color: 						#86C7D6 !important;
            padding: 12px 18px !important;
            font-size: 1.05em;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .highlight-button:hover {
            background-color: #5499C7 !important;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
		.button-container {
		    display: flex;
		    gap: 10px;
		    margin-right: 20px;
		}
		
		.button-container a {
		    font-family: 'Noto Sans JP', sans-serif;
		    font-size: 16px;
		    color: #5B9A9E;
		    text-decoration: none;
		    transition: color 0.3s, transform 0.3s;
		}
		
		.button-container a:hover {
		    color: #6BA7B6;
		    transform: translateY(-2px);
		}
		
		.button-container a:active {
		    color: #4D8C8F;
		    transform: translateY(0);
		}
		
		.button-container span {
		    color: #5B9A9E;
		    font-size: 18px;
		}
		/* 時間列スタイル */
		/* 時間セル */
		.time-cell {
		    width: 80px;
		    text-align: left;
		    font-family: 'Noto Sans JP', sans-serif;
		    vertical-align: top;
		    padding-left: 10px;
		    font-weight: bold;
		}
		
		/* イベントセル */
		.event-cell {
		    text-align: left;
		    font-family: 'Noto Sans JP', sans-serif;
		    padding-left: 10px;
		    vertical-align: top;
		    position: relative;
		}
		
		/* 縦線のデザイン */
		.line {
		    display: inline-block;
		    color: #5F7D8A;
		    margin-right: 10px;
		    font-size: 18px;
		    line-height: 1.6;
		}
		



    </style>
</head>
<body>
    <div class="header">
        <a 	th:href="@{/plans/home}">
            <img src="/image/logo.png" alt="ロゴ">
        </a>
        <h1>旅行プラン</h1>
		<div class="button-container">
			<form th:action="@{/plans/edit/{id}(id=${plan.id})}" method="get" style="display:inline;">
			    
			    <button type="submit" class="delete-link" style="background: none; border: none; color: #5B9A9E; text-decoration: none; font-family: 'Noto Sans JP', sans-serif; font-size: 16px; cursor: pointer;;">
			        旅行プランを編集
			    </button>
			</form>
			<span style="margin-top: 7px;">|</span>
			<form th:action="@{/plans/delete/{id}(id=${plan.id})}" method="post" style="display:inline;">
			    <input type="hidden" name="_method" value="delete">
			    <button type="submit" class="delete-link" style="background: none; border: none; color: #5B9A9E; text-decoration: none; font-family: 'Noto Sans JP', sans-serif; font-size: 16px; cursor: pointer;" onclick="return confirm('本当に削除しますか？');">
			        旅行プランを削除
			    </button>
			</form>
		</div>
        <a th:href="@{/plans/home}" class="back-button">プラン一覧に戻る</a>
    </div>
    <div class="container">
        <div class="title-wrapper">
            <h1 th:text="${plan.title}"></h1>
            <div class="destination-badge" th:text="${plan.destination1}"></div>
            <div th:if="${plan.destination2}" class="destination-badge" th:text="${plan.destination2}"></div>
            <div th:if="${plan.destination3}" class="destination-badge" th:text="${plan.destination3}"></div>
            <div class="date-range">
                <span th:text="${#temporals.format(plan.startDate, 'yyyy年MM月dd日')}"></span>～
                <span th:text="${#temporals.format(plan.endDate, 'yyyy年MM月dd日')}"></span>
            </div>
			
			<div class="button-container" style="margin-left: auto;">
			        <a th:href="@{/items/entry/{id}(id=${plan.id})}">
			            <button class="highlight-button">持ち物リスト</button>
			        </a>
			        <a th:href="@{/todos/entry/{id}(id=${plan.id})}">
			            <button class="highlight-button">TODOリスト</button>
			        </a>
			    </div>
        </div>
		<br>
        <div class="table-wrapper">
			<div class="button-container">
            <h3>スケジュール</h3>
			<a th:href="@{/schedules/entry/{id}(id=${plan.id})}">
			    <button>＋ スケジュールを新規作成</button>
			</a>
			</div>
			<br>
			<table>
			    <tbody>
			        <th:block th:each="schedule, iterStat : ${plan.schedules}">
			            <!-- 日付が変わるたびに日付行を追加 -->
			            <tr th:if="${iterStat.index == 0 || !#temporals.format(schedule.scheduleTime, 'yyyy-MM-dd').equals(#temporals.format(plan.schedules[iterStat.index - 1].scheduleTime, 'yyyy-MM-dd'))}" class="date-row">
			                <td colspan="4" th:text="${#temporals.format(schedule.scheduleTime, 'yyyy年MM月dd日 (E)')}"></td>
			            </tr>
			            <!-- 時間 -->
			            <tr>
			                <td class="time-cell" th:text="${#temporals.format(schedule.scheduleTime, 'HH:mm')}"></td>
							
			            </tr>
			            <!-- 縦線とイベント -->
			            <tr>
			                <td class="event-cell">
								<span class="event-icon">
								            <!-- アイコンを表示 -->
								            <i class="fas" th:class="${schedule.flag == '食事' ? 'fas fa-utensils' :
								                                    schedule.flag == '移動' ? 'fas fa-walking' :
								                                    schedule.flag == '観光' ? 'fas fa-camera' :
								                                    schedule.flag == '宿泊' ? 'fas fa-bed' :
								                                    schedule.flag == 'ショッピング' ? 'fas fa-shopping-bag' : ''}"></i>
								        </span>
								<td>
			                    <a th:href="@{/schedules/edit/{id}(id=${schedule.id})}" th:text="${schedule.event}" class="event-link"></a>
								</td>
								<td>
								<a th:text="${schedule.memo}" style="color: #666; font-size: 0.9em; margin-left: 15px;"></a>
			                </td>
							<td>
								<a th:href="${schedule.url}" th:text="${schedule.url}" style="color: #666; font-size: 0.9em; margin-left: 15px;" target="_blank"></a>
							    </td>
			            </tr>
			        </th:block>
			    </tbody>
			</table>
        </div>
    </div>
    <div class="footer">
        <p>© 2024 旅行プランサイト 旅びより | 利用規約 | お問い合わせ</p>
    </div>
</body>
</html>